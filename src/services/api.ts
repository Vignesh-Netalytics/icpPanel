import { API_BASE_URL, ENVIRONMENT } from '@/lib/constants';
import { TaskResponse, ApprovalPayload } from '@/types';

export async function fetchTasksByStatus(statusId: number): Promise<TaskResponse> {
  const condition = JSON.stringify({ rules: [{ field: "task_status_id", operator: "eq", value: statusId.toString() }] });
  const url = `${API_BASE_URL}/sdp/rules/api/v2/task/geticpapp?condition=${encodeURIComponent(condition)}`;
  let AUTH_TOKEN;
  switch (ENVIRONMENT) {
    case 'DEV':
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJTNEZ1aGxZYmZONjBETklEUHdEWjUzc0pQY29vWkdwWTJhZTFPOUVPSVk4In0.eyJleHAiOjE3NDEyNDAxOTcsImlhdCI6MTc0MTIzOTg5NywiYXV0aF90aW1lIjoxNzQxMjM5ODk1LCJqdGkiOiIzOWEzOTQzYy03MmI4LTQ4NmMtYTk4Ny1jODU0ZjFkMDY4ZmMiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC1kZXYubW9ocmUuZ292LmFlL2F1dGgvcmVhbG1zL091dFN5c3RlbXMtT0lEQyIsImF1ZCI6WyJyZWFsbS1tYW5hZ2VtZW50IiwiYnJva2VyIiwiYWNjb3VudCJdLCJzdWIiOiIxNGQ3NzU3Yi1hZjM1LTQ5NTItYTVlNy05NTAxMmI3NmYxNjQiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJvcy1vaWRjIiwic2lkIjoiY2IwYjRmZjktYTNhOS00MTQ1LThhMDItYTdlZTBiOGMzZDAyIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiRXN0YWJsaXNobWVudCBPd25lciIsImRlZmF1bHQtcm9sZXMtb3V0c3lzdGVtcy1vaWRjIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsidmlldy1pZGVudGl0eS1wcm92aWRlcnMiLCJ2aWV3LXJlYWxtIiwibWFuYWdlLWlkZW50aXR5LXByb3ZpZGVycyIsImltcGVyc29uYXRpb24iLCJyZWFsbS1hZG1pbiIsImNyZWF0ZS1jbGllbnQiLCJtYW5hZ2UtdXNlcnMiLCJxdWVyeS1yZWFsbXMiLCJ2aWV3LWF1dGhvcml6YXRpb24iLCJxdWVyeS1jbGllbnRzIiwicXVlcnktdXNlcnMiLCJtYW5hZ2UtZXZlbnRzIiwibWFuYWdlLXJlYWxtIiwidmlldy1ldmVudHMiLCJ2aWV3LXVzZXJzIiwidmlldy1jbGllbnRzIiwibWFuYWdlLWF1dGhvcml6YXRpb24iLCJtYW5hZ2UtY2xpZW50cyIsInF1ZXJ5LWdyb3VwcyJdfSwiYnJva2VyIjp7InJvbGVzIjpbInJlYWQtdG9rZW4iXX0sIm9zLW9pZGMiOnsicm9sZXMiOlsiVmlldy1Vc2VycyJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsInZpZXctYXBwbGljYXRpb25zIiwidmlldy1jb25zZW50Iiwidmlldy1ncm91cHMiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsImRlbGV0ZS1hY2NvdW50IiwibWFuYWdlLWNvbnNlbnQiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiUmFqYSBDIiwiZ3JvdXBzIjpbIkJhY2tPZmZpY2VfSW5zcGVjdGlvbl9UZWFtTGVhZCJdLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJyYWphIiwiZ2l2ZW5fbmFtZSI6IlJhamEiLCJmYW1pbHlfbmFtZSI6IkMiLCJlbWFpbCI6InJhamFjQGdtYWlsLmNvbSJ9.qE3w-S6l6WHoFpidcgE3MbhXRAjoIsrkwTC1UE0WrKPq7s6LuCRo42VbmzlyU2xN48GqDA_XjT2rttaRvUITb16s8QvMdiKR9Xu6-52QKRE7sDiqpdgieLZxy0MmUQuLqnzRm5NuphW4M3zEALPt_8-xOxipf35u2P95c9JEpH7KOq2aG_s8ZSEZ0kiP2heTqDKrtUATvqBx3xBwP7AQF3bFV0NjKgyLAb70xVGIT1s_EawtbuTX5BQPYdxFmbeu32AO1M-80mXbsuhTrDbW5MxTWh1wABlHlnYlt1h6oHFh1uW5feHxMoDb9UvpYr9hi7B3D9SRTA8TZOBexxQSdQ'
      break;
    case 'TEST':
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ5WFkwRFhaWFhCRE5LczRCdV8wWHVhUTdRRWhKdk00X1I4cDNlUzUzdTAwIn0.eyJleHAiOjE3NDU5OTE2NjMsImlhdCI6MTc0NTk5MTM2MywiYXV0aF90aW1lIjoxNzQ1OTkxMzYxLCJqdGkiOiJhY2Y1OWYyMy1jMGFlLTRkMjYtYTA5OS01M2IxMjQ0ZGY2OWIiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC10ZXN0Lm1vaHJlLmdvdi5hZS9hdXRoL3JlYWxtcy9lbXBsb3llZXMiLCJzdWIiOiI2MzRmMzU5ZC1jNGIxLTQzMzEtOGY0ZC1mZTE0ZDdkZmFjY2IiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJyZWFjdC1jbGllbnQiLCJzaWQiOiIxMjRjMWZhNS05OTFhLTQ4OWEtYjBjMS0wZTQyYTdmOTFhOTMiLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbIi8qIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJTeXN0ZW0gQWRtaW4iXX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJSYW1hbmFkaCBSYXZpbnV0aGFsYSIsInByZWZlcnJlZF91c2VybmFtZSI6InN5c3RlbWFkbWluIiwibG9jYWxlIjoiZW4iLCJnaXZlbl9uYW1lIjoiUmFtYW5hZGgiLCJmYW1pbHlfbmFtZSI6IlJhdmludXRoYWxhIiwiZW1haWwiOiJyYW1hbmFkaEBuZXRhbHl0aWNzLmNvIn0.SUFlEXuwq4oCOX_NTHBPgLq2fwUVrB7h1oYNJZ6ikrL_QECV1lOgjkeBTEI0uka9GMkptHHkdAxF1MLs59Cr5IID-OI1Yxmlsh3SEbomCSSeqy8PCZhpXe5X31W3iIfsnh-x4hmYqnr-Ux2a0Vj2q4I6mcN60S2ipCtBekadg05Jcyg8zdlBFFvY8GOFVgfQVVc8dWbap-TkLKYweg7IUYkVbM1Gf-GwMxtuaWT8Bfv5tScOplfHs4WjKS8VOmTyyCOtvN725DF8yXb_An42IcljV2Ym_HzT1JLIrxcxbTYX6JegpxKlMRve-ipCGExbhutRIUSNQdxm9_Dd1fsjGA'
      break;
    case 'UAT':
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJjZ3VKUzJMS1VLYmNySGUyNGI4ZjJOamFIZUZHa1BfTkQtTzAxNTJ3SmhZIn0.eyJleHAiOjE3NDU5OTMzNzUsImlhdCI6MTc0NTk5MTU3NSwiYXV0aF90aW1lIjoxNzQ1OTkxNTczLCJqdGkiOiI4YjI4NjZlMy02NDQyLTRhZDgtYmNiOS03OGFmMzBiNTk3NDUiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC11YXQubW9ocmUuZ292LmFlL2F1dGgvcmVhbG1zL2VtcGxveWVlcyIsInN1YiI6IjBiM2M0YWNiLWJlMDAtNDM0NS1hZWQxLWZmYzE4Njc2NjBmNCIsInR5cCI6IkJlYXJlciIsImF6cCI6InJlYWN0LWNsaWVudCIsInNpZCI6Ijg0MTE2N2ZmLWQ1YWMtNDc3My1iMDY2LTQ5M2RmMmQ4NDQxOSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiLyoiLCJodHRwOi8vbG9jYWxob3N0OjUxNzMiLCJodHRwczovL3NhaGVsLW9zdWF0Lm1vaHJlLmdvdi5hZS9PSURDL0xvZ291dCIsImh0dHBzOi8vc2VydmljZXMtc2RwLWRldi5tb2hyZS5nb3YuYWUvc2FoZWxhZG1pbi8iXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIlN5c3RlbSBBZG1pbiJdfSwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwibmFtZSI6IlJBTUFOQURIIFJBVklOVVRIQUxBIiwiZ3JvdXBzIjpbIkJhY2tPZmZpY2VfU3lzdGVtQWRtaW4iXSwicHJlZmVycmVkX3VzZXJuYW1lIjoic3lzdGVtYWRtaW4iLCJsb2NhbGUiOiJlbiIsImdpdmVuX25hbWUiOiJSQU1BTkFESCIsImZhbWlseV9uYW1lIjoiUkFWSU5VVEhBTEEiLCJlbWFpbCI6InJhbWFuYWRoQG5ldGFseXRpY3MuY28ifQ.hI8exyGorxJZ8YLnwHF06OLjl5ITO_RTIc0dCMoATAm_Hk56ju1tjrNEf3xi1-7gnXEHMsjejfZKxcdvW_PHoTv4xC8Wbw-9ywqhqz_8CQArlXiFj8RpLki-23jTYzqWviUvULsOTwxjRM9VWSabcIv4yQEAkmgdyJ5w5vmtLku2SHPo1Rv07i_MtL9LBnLwWdoYU65vO0EuZCQ6TlJOusJOeLvoRwX2MamaByrcABc1qW1CupA7mSSi_EfbYkGRnuATeG2xYF6htFvwGeNjWdOa8p9mz41Q5mePK79-2lx8EJNltrmtYhy3WtKKb2NBVKSpYathS4Y_C-eee8lI6w'
      break;
    // By Default Loading the Dev Token
    default:
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJTNEZ1aGxZYmZONjBETklEUHdEWjUzc0pQY29vWkdwWTJhZTFPOUVPSVk4In0.eyJleHAiOjE3NDEyNDAxOTcsImlhdCI6MTc0MTIzOTg5NywiYXV0aF90aW1lIjoxNzQxMjM5ODk1LCJqdGkiOiIzOWEzOTQzYy03MmI4LTQ4NmMtYTk4Ny1jODU0ZjFkMDY4ZmMiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC1kZXYubW9ocmUuZ292LmFlL2F1dGgvcmVhbG1zL091dFN5c3RlbXMtT0lEQyIsImF1ZCI6WyJyZWFsbS1tYW5hZ2VtZW50IiwiYnJva2VyIiwiYWNjb3VudCJdLCJzdWIiOiIxNGQ3NzU3Yi1hZjM1LTQ5NTItYTVlNy05NTAxMmI3NmYxNjQiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJvcy1vaWRjIiwic2lkIjoiY2IwYjRmZjktYTNhOS00MTQ1LThhMDItYTdlZTBiOGMzZDAyIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiRXN0YWJsaXNobWVudCBPd25lciIsImRlZmF1bHQtcm9sZXMtb3V0c3lzdGVtcy1vaWRjIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsidmlldy1pZGVudGl0eS1wcm92aWRlcnMiLCJ2aWV3LXJlYWxtIiwibWFuYWdlLWlkZW50aXR5LXByb3ZpZGVycyIsImltcGVyc29uYXRpb24iLCJyZWFsbS1hZG1pbiIsImNyZWF0ZS1jbGllbnQiLCJtYW5hZ2UtdXNlcnMiLCJxdWVyeS1yZWFsbXMiLCJ2aWV3LWF1dGhvcml6YXRpb24iLCJxdWVyeS1jbGllbnRzIiwicXVlcnktdXNlcnMiLCJtYW5hZ2UtZXZlbnRzIiwibWFuYWdlLXJlYWxtIiwidmlldy1ldmVudHMiLCJ2aWV3LXVzZXJzIiwidmlldy1jbGllbnRzIiwibWFuYWdlLWF1dGhvcml6YXRpb24iLCJtYW5hZ2UtY2xpZW50cyIsInF1ZXJ5LWdyb3VwcyJdfSwiYnJva2VyIjp7InJvbGVzIjpbInJlYWQtdG9rZW4iXX0sIm9zLW9pZGMiOnsicm9sZXMiOlsiVmlldy1Vc2VycyJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsInZpZXctYXBwbGljYXRpb25zIiwidmlldy1jb25zZW50Iiwidmlldy1ncm91cHMiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsImRlbGV0ZS1hY2NvdW50IiwibWFuYWdlLWNvbnNlbnQiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiUmFqYSBDIiwiZ3JvdXBzIjpbIkJhY2tPZmZpY2VfSW5zcGVjdGlvbl9UZWFtTGVhZCJdLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJyYWphIiwiZ2l2ZW5fbmFtZSI6IlJhamEiLCJmYW1pbHlfbmFtZSI6IkMiLCJlbWFpbCI6InJhamFjQGdtYWlsLmNvbSJ9.qE3w-S6l6WHoFpidcgE3MbhXRAjoIsrkwTC1UE0WrKPq7s6LuCRo42VbmzlyU2xN48GqDA_XjT2rttaRvUITb16s8QvMdiKR9Xu6-52QKRE7sDiqpdgieLZxy0MmUQuLqnzRm5NuphW4M3zEALPt_8-xOxipf35u2P95c9JEpH7KOq2aG_s8ZSEZ0kiP2heTqDKrtUATvqBx3xBwP7AQF3bFV0NjKgyLAb70xVGIT1s_EawtbuTX5BQPYdxFmbeu32AO1M-80mXbsuhTrDbW5MxTWh1wABlHlnYlt1h6oHFh1uW5feHxMoDb9UvpYr9hi7B3D9SRTA8TZOBexxQSdQ'
      break;
  }
  
  try {
    const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `${AUTH_TOKEN}`,
      },
    });
    if (!response.ok) {
      throw new Error(`Error fetching tasks: ${response.statusText}`);
    }
    return await response.json();
  } catch (error) {
    console.error('Error fetching tasks:', error);
    throw error;
  }
}

export async function approveTask(payload: ApprovalPayload): Promise<any> {
  let AUTH_TOKEN;
  switch (ENVIRONMENT) {
    case 'DEV':
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJTNEZ1aGxZYmZONjBETklEUHdEWjUzc0pQY29vWkdwWTJhZTFPOUVPSVk4In0.eyJleHAiOjE3NDEyNDAxOTcsImlhdCI6MTc0MTIzOTg5NywiYXV0aF90aW1lIjoxNzQxMjM5ODk1LCJqdGkiOiIzOWEzOTQzYy03MmI4LTQ4NmMtYTk4Ny1jODU0ZjFkMDY4ZmMiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC1kZXYubW9ocmUuZ292LmFlL2F1dGgvcmVhbG1zL091dFN5c3RlbXMtT0lEQyIsImF1ZCI6WyJyZWFsbS1tYW5hZ2VtZW50IiwiYnJva2VyIiwiYWNjb3VudCJdLCJzdWIiOiIxNGQ3NzU3Yi1hZjM1LTQ5NTItYTVlNy05NTAxMmI3NmYxNjQiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJvcy1vaWRjIiwic2lkIjoiY2IwYjRmZjktYTNhOS00MTQ1LThhMDItYTdlZTBiOGMzZDAyIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiRXN0YWJsaXNobWVudCBPd25lciIsImRlZmF1bHQtcm9sZXMtb3V0c3lzdGVtcy1vaWRjIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsidmlldy1pZGVudGl0eS1wcm92aWRlcnMiLCJ2aWV3LXJlYWxtIiwibWFuYWdlLWlkZW50aXR5LXByb3ZpZGVycyIsImltcGVyc29uYXRpb24iLCJyZWFsbS1hZG1pbiIsImNyZWF0ZS1jbGllbnQiLCJtYW5hZ2UtdXNlcnMiLCJxdWVyeS1yZWFsbXMiLCJ2aWV3LWF1dGhvcml6YXRpb24iLCJxdWVyeS1jbGllbnRzIiwicXVlcnktdXNlcnMiLCJtYW5hZ2UtZXZlbnRzIiwibWFuYWdlLXJlYWxtIiwidmlldy1ldmVudHMiLCJ2aWV3LXVzZXJzIiwidmlldy1jbGllbnRzIiwibWFuYWdlLWF1dGhvcml6YXRpb24iLCJtYW5hZ2UtY2xpZW50cyIsInF1ZXJ5LWdyb3VwcyJdfSwiYnJva2VyIjp7InJvbGVzIjpbInJlYWQtdG9rZW4iXX0sIm9zLW9pZGMiOnsicm9sZXMiOlsiVmlldy1Vc2VycyJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsInZpZXctYXBwbGljYXRpb25zIiwidmlldy1jb25zZW50Iiwidmlldy1ncm91cHMiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsImRlbGV0ZS1hY2NvdW50IiwibWFuYWdlLWNvbnNlbnQiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiUmFqYSBDIiwiZ3JvdXBzIjpbIkJhY2tPZmZpY2VfSW5zcGVjdGlvbl9UZWFtTGVhZCJdLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJyYWphIiwiZ2l2ZW5fbmFtZSI6IlJhamEiLCJmYW1pbHlfbmFtZSI6IkMiLCJlbWFpbCI6InJhamFjQGdtYWlsLmNvbSJ9.qE3w-S6l6WHoFpidcgE3MbhXRAjoIsrkwTC1UE0WrKPq7s6LuCRo42VbmzlyU2xN48GqDA_XjT2rttaRvUITb16s8QvMdiKR9Xu6-52QKRE7sDiqpdgieLZxy0MmUQuLqnzRm5NuphW4M3zEALPt_8-xOxipf35u2P95c9JEpH7KOq2aG_s8ZSEZ0kiP2heTqDKrtUATvqBx3xBwP7AQF3bFV0NjKgyLAb70xVGIT1s_EawtbuTX5BQPYdxFmbeu32AO1M-80mXbsuhTrDbW5MxTWh1wABlHlnYlt1h6oHFh1uW5feHxMoDb9UvpYr9hi7B3D9SRTA8TZOBexxQSdQ'
      break;
    case 'TEST':
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ5WFkwRFhaWFhCRE5LczRCdV8wWHVhUTdRRWhKdk00X1I4cDNlUzUzdTAwIn0.eyJleHAiOjE3NDU5OTE2NjMsImlhdCI6MTc0NTk5MTM2MywiYXV0aF90aW1lIjoxNzQ1OTkxMzYxLCJqdGkiOiJhY2Y1OWYyMy1jMGFlLTRkMjYtYTA5OS01M2IxMjQ0ZGY2OWIiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC10ZXN0Lm1vaHJlLmdvdi5hZS9hdXRoL3JlYWxtcy9lbXBsb3llZXMiLCJzdWIiOiI2MzRmMzU5ZC1jNGIxLTQzMzEtOGY0ZC1mZTE0ZDdkZmFjY2IiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJyZWFjdC1jbGllbnQiLCJzaWQiOiIxMjRjMWZhNS05OTFhLTQ4OWEtYjBjMS0wZTQyYTdmOTFhOTMiLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbIi8qIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJTeXN0ZW0gQWRtaW4iXX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJSYW1hbmFkaCBSYXZpbnV0aGFsYSIsInByZWZlcnJlZF91c2VybmFtZSI6InN5c3RlbWFkbWluIiwibG9jYWxlIjoiZW4iLCJnaXZlbl9uYW1lIjoiUmFtYW5hZGgiLCJmYW1pbHlfbmFtZSI6IlJhdmludXRoYWxhIiwiZW1haWwiOiJyYW1hbmFkaEBuZXRhbHl0aWNzLmNvIn0.SUFlEXuwq4oCOX_NTHBPgLq2fwUVrB7h1oYNJZ6ikrL_QECV1lOgjkeBTEI0uka9GMkptHHkdAxF1MLs59Cr5IID-OI1Yxmlsh3SEbomCSSeqy8PCZhpXe5X31W3iIfsnh-x4hmYqnr-Ux2a0Vj2q4I6mcN60S2ipCtBekadg05Jcyg8zdlBFFvY8GOFVgfQVVc8dWbap-TkLKYweg7IUYkVbM1Gf-GwMxtuaWT8Bfv5tScOplfHs4WjKS8VOmTyyCOtvN725DF8yXb_An42IcljV2Ym_HzT1JLIrxcxbTYX6JegpxKlMRve-ipCGExbhutRIUSNQdxm9_Dd1fsjGA'
      break;
    case 'UAT':
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJjZ3VKUzJMS1VLYmNySGUyNGI4ZjJOamFIZUZHa1BfTkQtTzAxNTJ3SmhZIn0.eyJleHAiOjE3NDU5OTMzNzUsImlhdCI6MTc0NTk5MTU3NSwiYXV0aF90aW1lIjoxNzQ1OTkxNTczLCJqdGkiOiI4YjI4NjZlMy02NDQyLTRhZDgtYmNiOS03OGFmMzBiNTk3NDUiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC11YXQubW9ocmUuZ292LmFlL2F1dGgvcmVhbG1zL2VtcGxveWVlcyIsInN1YiI6IjBiM2M0YWNiLWJlMDAtNDM0NS1hZWQxLWZmYzE4Njc2NjBmNCIsInR5cCI6IkJlYXJlciIsImF6cCI6InJlYWN0LWNsaWVudCIsInNpZCI6Ijg0MTE2N2ZmLWQ1YWMtNDc3My1iMDY2LTQ5M2RmMmQ4NDQxOSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiLyoiLCJodHRwOi8vbG9jYWxob3N0OjUxNzMiLCJodHRwczovL3NhaGVsLW9zdWF0Lm1vaHJlLmdvdi5hZS9PSURDL0xvZ291dCIsImh0dHBzOi8vc2VydmljZXMtc2RwLWRldi5tb2hyZS5nb3YuYWUvc2FoZWxhZG1pbi8iXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIlN5c3RlbSBBZG1pbiJdfSwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwibmFtZSI6IlJBTUFOQURIIFJBVklOVVRIQUxBIiwiZ3JvdXBzIjpbIkJhY2tPZmZpY2VfU3lzdGVtQWRtaW4iXSwicHJlZmVycmVkX3VzZXJuYW1lIjoic3lzdGVtYWRtaW4iLCJsb2NhbGUiOiJlbiIsImdpdmVuX25hbWUiOiJSQU1BTkFESCIsImZhbWlseV9uYW1lIjoiUkFWSU5VVEhBTEEiLCJlbWFpbCI6InJhbWFuYWRoQG5ldGFseXRpY3MuY28ifQ.hI8exyGorxJZ8YLnwHF06OLjl5ITO_RTIc0dCMoATAm_Hk56ju1tjrNEf3xi1-7gnXEHMsjejfZKxcdvW_PHoTv4xC8Wbw-9ywqhqz_8CQArlXiFj8RpLki-23jTYzqWviUvULsOTwxjRM9VWSabcIv4yQEAkmgdyJ5w5vmtLku2SHPo1Rv07i_MtL9LBnLwWdoYU65vO0EuZCQ6TlJOusJOeLvoRwX2MamaByrcABc1qW1CupA7mSSi_EfbYkGRnuATeG2xYF6htFvwGeNjWdOa8p9mz41Q5mePK79-2lx8EJNltrmtYhy3WtKKb2NBVKSpYathS4Y_C-eee8lI6w'
      break;
    // By Default Loading the Dev Token
    default:
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJTNEZ1aGxZYmZONjBETklEUHdEWjUzc0pQY29vWkdwWTJhZTFPOUVPSVk4In0.eyJleHAiOjE3NDEyNDAxOTcsImlhdCI6MTc0MTIzOTg5NywiYXV0aF90aW1lIjoxNzQxMjM5ODk1LCJqdGkiOiIzOWEzOTQzYy03MmI4LTQ4NmMtYTk4Ny1jODU0ZjFkMDY4ZmMiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC1kZXYubW9ocmUuZ292LmFlL2F1dGgvcmVhbG1zL091dFN5c3RlbXMtT0lEQyIsImF1ZCI6WyJyZWFsbS1tYW5hZ2VtZW50IiwiYnJva2VyIiwiYWNjb3VudCJdLCJzdWIiOiIxNGQ3NzU3Yi1hZjM1LTQ5NTItYTVlNy05NTAxMmI3NmYxNjQiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJvcy1vaWRjIiwic2lkIjoiY2IwYjRmZjktYTNhOS00MTQ1LThhMDItYTdlZTBiOGMzZDAyIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiRXN0YWJsaXNobWVudCBPd25lciIsImRlZmF1bHQtcm9sZXMtb3V0c3lzdGVtcy1vaWRjIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsidmlldy1pZGVudGl0eS1wcm92aWRlcnMiLCJ2aWV3LXJlYWxtIiwibWFuYWdlLWlkZW50aXR5LXByb3ZpZGVycyIsImltcGVyc29uYXRpb24iLCJyZWFsbS1hZG1pbiIsImNyZWF0ZS1jbGllbnQiLCJtYW5hZ2UtdXNlcnMiLCJxdWVyeS1yZWFsbXMiLCJ2aWV3LWF1dGhvcml6YXRpb24iLCJxdWVyeS1jbGllbnRzIiwicXVlcnktdXNlcnMiLCJtYW5hZ2UtZXZlbnRzIiwibWFuYWdlLXJlYWxtIiwidmlldy1ldmVudHMiLCJ2aWV3LXVzZXJzIiwidmlldy1jbGllbnRzIiwibWFuYWdlLWF1dGhvcml6YXRpb24iLCJtYW5hZ2UtY2xpZW50cyIsInF1ZXJ5LWdyb3VwcyJdfSwiYnJva2VyIjp7InJvbGVzIjpbInJlYWQtdG9rZW4iXX0sIm9zLW9pZGMiOnsicm9sZXMiOlsiVmlldy1Vc2VycyJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsInZpZXctYXBwbGljYXRpb25zIiwidmlldy1jb25zZW50Iiwidmlldy1ncm91cHMiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsImRlbGV0ZS1hY2NvdW50IiwibWFuYWdlLWNvbnNlbnQiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiUmFqYSBDIiwiZ3JvdXBzIjpbIkJhY2tPZmZpY2VfSW5zcGVjdGlvbl9UZWFtTGVhZCJdLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJyYWphIiwiZ2l2ZW5fbmFtZSI6IlJhamEiLCJmYW1pbHlfbmFtZSI6IkMiLCJlbWFpbCI6InJhamFjQGdtYWlsLmNvbSJ9.qE3w-S6l6WHoFpidcgE3MbhXRAjoIsrkwTC1UE0WrKPq7s6LuCRo42VbmzlyU2xN48GqDA_XjT2rttaRvUITb16s8QvMdiKR9Xu6-52QKRE7sDiqpdgieLZxy0MmUQuLqnzRm5NuphW4M3zEALPt_8-xOxipf35u2P95c9JEpH7KOq2aG_s8ZSEZ0kiP2heTqDKrtUATvqBx3xBwP7AQF3bFV0NjKgyLAb70xVGIT1s_EawtbuTX5BQPYdxFmbeu32AO1M-80mXbsuhTrDbW5MxTWh1wABlHlnYlt1h6oHFh1uW5feHxMoDb9UvpYr9hi7B3D9SRTA8TZOBexxQSdQ'
      break;
  }
  try {
    const response = await fetch(`${API_BASE_URL}/sdp/rules/api/v2/task/actions/approve`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': AUTH_TOKEN
      },
      body: JSON.stringify(payload),
    });
    
    if (!response.ok) {
      throw new Error(`Error approving task: ${response.statusText}`);
    }
    
    return await response.json();
  } catch (error) {
    console.error('Error approving task:', error);
    throw error;
  }
}

export async function rejectTask(payload: ApprovalPayload): Promise<any> {
  let AUTH_TOKEN;
  switch (ENVIRONMENT) {
    case 'DEV':
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJTNEZ1aGxZYmZONjBETklEUHdEWjUzc0pQY29vWkdwWTJhZTFPOUVPSVk4In0.eyJleHAiOjE3NDEyNDAxOTcsImlhdCI6MTc0MTIzOTg5NywiYXV0aF90aW1lIjoxNzQxMjM5ODk1LCJqdGkiOiIzOWEzOTQzYy03MmI4LTQ4NmMtYTk4Ny1jODU0ZjFkMDY4ZmMiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC1kZXYubW9ocmUuZ292LmFlL2F1dGgvcmVhbG1zL091dFN5c3RlbXMtT0lEQyIsImF1ZCI6WyJyZWFsbS1tYW5hZ2VtZW50IiwiYnJva2VyIiwiYWNjb3VudCJdLCJzdWIiOiIxNGQ3NzU3Yi1hZjM1LTQ5NTItYTVlNy05NTAxMmI3NmYxNjQiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJvcy1vaWRjIiwic2lkIjoiY2IwYjRmZjktYTNhOS00MTQ1LThhMDItYTdlZTBiOGMzZDAyIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiRXN0YWJsaXNobWVudCBPd25lciIsImRlZmF1bHQtcm9sZXMtb3V0c3lzdGVtcy1vaWRjIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsidmlldy1pZGVudGl0eS1wcm92aWRlcnMiLCJ2aWV3LXJlYWxtIiwibWFuYWdlLWlkZW50aXR5LXByb3ZpZGVycyIsImltcGVyc29uYXRpb24iLCJyZWFsbS1hZG1pbiIsImNyZWF0ZS1jbGllbnQiLCJtYW5hZ2UtdXNlcnMiLCJxdWVyeS1yZWFsbXMiLCJ2aWV3LWF1dGhvcml6YXRpb24iLCJxdWVyeS1jbGllbnRzIiwicXVlcnktdXNlcnMiLCJtYW5hZ2UtZXZlbnRzIiwibWFuYWdlLXJlYWxtIiwidmlldy1ldmVudHMiLCJ2aWV3LXVzZXJzIiwidmlldy1jbGllbnRzIiwibWFuYWdlLWF1dGhvcml6YXRpb24iLCJtYW5hZ2UtY2xpZW50cyIsInF1ZXJ5LWdyb3VwcyJdfSwiYnJva2VyIjp7InJvbGVzIjpbInJlYWQtdG9rZW4iXX0sIm9zLW9pZGMiOnsicm9sZXMiOlsiVmlldy1Vc2VycyJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsInZpZXctYXBwbGljYXRpb25zIiwidmlldy1jb25zZW50Iiwidmlldy1ncm91cHMiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsImRlbGV0ZS1hY2NvdW50IiwibWFuYWdlLWNvbnNlbnQiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiUmFqYSBDIiwiZ3JvdXBzIjpbIkJhY2tPZmZpY2VfSW5zcGVjdGlvbl9UZWFtTGVhZCJdLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJyYWphIiwiZ2l2ZW5fbmFtZSI6IlJhamEiLCJmYW1pbHlfbmFtZSI6IkMiLCJlbWFpbCI6InJhamFjQGdtYWlsLmNvbSJ9.qE3w-S6l6WHoFpidcgE3MbhXRAjoIsrkwTC1UE0WrKPq7s6LuCRo42VbmzlyU2xN48GqDA_XjT2rttaRvUITb16s8QvMdiKR9Xu6-52QKRE7sDiqpdgieLZxy0MmUQuLqnzRm5NuphW4M3zEALPt_8-xOxipf35u2P95c9JEpH7KOq2aG_s8ZSEZ0kiP2heTqDKrtUATvqBx3xBwP7AQF3bFV0NjKgyLAb70xVGIT1s_EawtbuTX5BQPYdxFmbeu32AO1M-80mXbsuhTrDbW5MxTWh1wABlHlnYlt1h6oHFh1uW5feHxMoDb9UvpYr9hi7B3D9SRTA8TZOBexxQSdQ'
      break;
    case 'TEST':
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ5WFkwRFhaWFhCRE5LczRCdV8wWHVhUTdRRWhKdk00X1I4cDNlUzUzdTAwIn0.eyJleHAiOjE3NDU5OTE2NjMsImlhdCI6MTc0NTk5MTM2MywiYXV0aF90aW1lIjoxNzQ1OTkxMzYxLCJqdGkiOiJhY2Y1OWYyMy1jMGFlLTRkMjYtYTA5OS01M2IxMjQ0ZGY2OWIiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC10ZXN0Lm1vaHJlLmdvdi5hZS9hdXRoL3JlYWxtcy9lbXBsb3llZXMiLCJzdWIiOiI2MzRmMzU5ZC1jNGIxLTQzMzEtOGY0ZC1mZTE0ZDdkZmFjY2IiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJyZWFjdC1jbGllbnQiLCJzaWQiOiIxMjRjMWZhNS05OTFhLTQ4OWEtYjBjMS0wZTQyYTdmOTFhOTMiLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbIi8qIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJTeXN0ZW0gQWRtaW4iXX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJSYW1hbmFkaCBSYXZpbnV0aGFsYSIsInByZWZlcnJlZF91c2VybmFtZSI6InN5c3RlbWFkbWluIiwibG9jYWxlIjoiZW4iLCJnaXZlbl9uYW1lIjoiUmFtYW5hZGgiLCJmYW1pbHlfbmFtZSI6IlJhdmludXRoYWxhIiwiZW1haWwiOiJyYW1hbmFkaEBuZXRhbHl0aWNzLmNvIn0.SUFlEXuwq4oCOX_NTHBPgLq2fwUVrB7h1oYNJZ6ikrL_QECV1lOgjkeBTEI0uka9GMkptHHkdAxF1MLs59Cr5IID-OI1Yxmlsh3SEbomCSSeqy8PCZhpXe5X31W3iIfsnh-x4hmYqnr-Ux2a0Vj2q4I6mcN60S2ipCtBekadg05Jcyg8zdlBFFvY8GOFVgfQVVc8dWbap-TkLKYweg7IUYkVbM1Gf-GwMxtuaWT8Bfv5tScOplfHs4WjKS8VOmTyyCOtvN725DF8yXb_An42IcljV2Ym_HzT1JLIrxcxbTYX6JegpxKlMRve-ipCGExbhutRIUSNQdxm9_Dd1fsjGA'
      break;
    case 'UAT':
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJjZ3VKUzJMS1VLYmNySGUyNGI4ZjJOamFIZUZHa1BfTkQtTzAxNTJ3SmhZIn0.eyJleHAiOjE3NDU5OTMzNzUsImlhdCI6MTc0NTk5MTU3NSwiYXV0aF90aW1lIjoxNzQ1OTkxNTczLCJqdGkiOiI4YjI4NjZlMy02NDQyLTRhZDgtYmNiOS03OGFmMzBiNTk3NDUiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC11YXQubW9ocmUuZ292LmFlL2F1dGgvcmVhbG1zL2VtcGxveWVlcyIsInN1YiI6IjBiM2M0YWNiLWJlMDAtNDM0NS1hZWQxLWZmYzE4Njc2NjBmNCIsInR5cCI6IkJlYXJlciIsImF6cCI6InJlYWN0LWNsaWVudCIsInNpZCI6Ijg0MTE2N2ZmLWQ1YWMtNDc3My1iMDY2LTQ5M2RmMmQ4NDQxOSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiLyoiLCJodHRwOi8vbG9jYWxob3N0OjUxNzMiLCJodHRwczovL3NhaGVsLW9zdWF0Lm1vaHJlLmdvdi5hZS9PSURDL0xvZ291dCIsImh0dHBzOi8vc2VydmljZXMtc2RwLWRldi5tb2hyZS5nb3YuYWUvc2FoZWxhZG1pbi8iXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIlN5c3RlbSBBZG1pbiJdfSwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwibmFtZSI6IlJBTUFOQURIIFJBVklOVVRIQUxBIiwiZ3JvdXBzIjpbIkJhY2tPZmZpY2VfU3lzdGVtQWRtaW4iXSwicHJlZmVycmVkX3VzZXJuYW1lIjoic3lzdGVtYWRtaW4iLCJsb2NhbGUiOiJlbiIsImdpdmVuX25hbWUiOiJSQU1BTkFESCIsImZhbWlseV9uYW1lIjoiUkFWSU5VVEhBTEEiLCJlbWFpbCI6InJhbWFuYWRoQG5ldGFseXRpY3MuY28ifQ.hI8exyGorxJZ8YLnwHF06OLjl5ITO_RTIc0dCMoATAm_Hk56ju1tjrNEf3xi1-7gnXEHMsjejfZKxcdvW_PHoTv4xC8Wbw-9ywqhqz_8CQArlXiFj8RpLki-23jTYzqWviUvULsOTwxjRM9VWSabcIv4yQEAkmgdyJ5w5vmtLku2SHPo1Rv07i_MtL9LBnLwWdoYU65vO0EuZCQ6TlJOusJOeLvoRwX2MamaByrcABc1qW1CupA7mSSi_EfbYkGRnuATeG2xYF6htFvwGeNjWdOa8p9mz41Q5mePK79-2lx8EJNltrmtYhy3WtKKb2NBVKSpYathS4Y_C-eee8lI6w'
      break;
    // By Default Loading the Dev Token
    default:
      AUTH_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJTNEZ1aGxZYmZONjBETklEUHdEWjUzc0pQY29vWkdwWTJhZTFPOUVPSVk4In0.eyJleHAiOjE3NDEyNDAxOTcsImlhdCI6MTc0MTIzOTg5NywiYXV0aF90aW1lIjoxNzQxMjM5ODk1LCJqdGkiOiIzOWEzOTQzYy03MmI4LTQ4NmMtYTk4Ny1jODU0ZjFkMDY4ZmMiLCJpc3MiOiJodHRwczovL3NlcnZpY2VzLXNkcC1kZXYubW9ocmUuZ292LmFlL2F1dGgvcmVhbG1zL091dFN5c3RlbXMtT0lEQyIsImF1ZCI6WyJyZWFsbS1tYW5hZ2VtZW50IiwiYnJva2VyIiwiYWNjb3VudCJdLCJzdWIiOiIxNGQ3NzU3Yi1hZjM1LTQ5NTItYTVlNy05NTAxMmI3NmYxNjQiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJvcy1vaWRjIiwic2lkIjoiY2IwYjRmZjktYTNhOS00MTQ1LThhMDItYTdlZTBiOGMzZDAyIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiRXN0YWJsaXNobWVudCBPd25lciIsImRlZmF1bHQtcm9sZXMtb3V0c3lzdGVtcy1vaWRjIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsidmlldy1pZGVudGl0eS1wcm92aWRlcnMiLCJ2aWV3LXJlYWxtIiwibWFuYWdlLWlkZW50aXR5LXByb3ZpZGVycyIsImltcGVyc29uYXRpb24iLCJyZWFsbS1hZG1pbiIsImNyZWF0ZS1jbGllbnQiLCJtYW5hZ2UtdXNlcnMiLCJxdWVyeS1yZWFsbXMiLCJ2aWV3LWF1dGhvcml6YXRpb24iLCJxdWVyeS1jbGllbnRzIiwicXVlcnktdXNlcnMiLCJtYW5hZ2UtZXZlbnRzIiwibWFuYWdlLXJlYWxtIiwidmlldy1ldmVudHMiLCJ2aWV3LXVzZXJzIiwidmlldy1jbGllbnRzIiwibWFuYWdlLWF1dGhvcml6YXRpb24iLCJtYW5hZ2UtY2xpZW50cyIsInF1ZXJ5LWdyb3VwcyJdfSwiYnJva2VyIjp7InJvbGVzIjpbInJlYWQtdG9rZW4iXX0sIm9zLW9pZGMiOnsicm9sZXMiOlsiVmlldy1Vc2VycyJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsInZpZXctYXBwbGljYXRpb25zIiwidmlldy1jb25zZW50Iiwidmlldy1ncm91cHMiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsImRlbGV0ZS1hY2NvdW50IiwibWFuYWdlLWNvbnNlbnQiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiUmFqYSBDIiwiZ3JvdXBzIjpbIkJhY2tPZmZpY2VfSW5zcGVjdGlvbl9UZWFtTGVhZCJdLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJyYWphIiwiZ2l2ZW5fbmFtZSI6IlJhamEiLCJmYW1pbHlfbmFtZSI6IkMiLCJlbWFpbCI6InJhamFjQGdtYWlsLmNvbSJ9.qE3w-S6l6WHoFpidcgE3MbhXRAjoIsrkwTC1UE0WrKPq7s6LuCRo42VbmzlyU2xN48GqDA_XjT2rttaRvUITb16s8QvMdiKR9Xu6-52QKRE7sDiqpdgieLZxy0MmUQuLqnzRm5NuphW4M3zEALPt_8-xOxipf35u2P95c9JEpH7KOq2aG_s8ZSEZ0kiP2heTqDKrtUATvqBx3xBwP7AQF3bFV0NjKgyLAb70xVGIT1s_EawtbuTX5BQPYdxFmbeu32AO1M-80mXbsuhTrDbW5MxTWh1wABlHlnYlt1h6oHFh1uW5feHxMoDb9UvpYr9hi7B3D9SRTA8TZOBexxQSdQ'
      break;
  }
  try {
    const response = await fetch(`${API_BASE_URL}/sdp/rules/api/v2/task/actions/reject`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': AUTH_TOKEN
      },
      body: JSON.stringify(payload),
    });
    
    if (!response.ok) {
      throw new Error(`Error rejecting task: ${response.statusText}`);
    }
    
    return await response.json();
  } catch (error) {
    console.error('Error rejecting task:', error);
    throw error;
  }
}